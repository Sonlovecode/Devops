
################ docker
version: "3.8"

services:
  backend:
    build: ./phone-store-api
    container_name: phone-store-backend
    ports:
      - "5000:4000"          # host:container ‚Üí API m√°y b·∫°n l√† http://localhost:5000
    env_file:
      - ./phone-store-api/.env
    restart: always

  frontend:
    build:
      context: ./phone-store
      args:
        # FE build-time env cho Vite, browser s·∫Ω g·ªçi API qua http://localhost:5000
        VITE_API_BASE: "http://localhost:5000"
    container_name: phone-store-frontend
    ports:
      - "80:80"              # m·ªü web ·ªü http://localhost
    restart: always

networks:
  default:
    name: phone-store-network

################# deployed version

# version: "3.8"

# services:
#   backend:
#     image: <caoleson04>/phone-store-api:latest   # üëà S·ª¨A t√™n user Docker Hub
#     container_name: phone-store-backend
#     ports:
#       - "5000:4000"          # server:container ‚Üí API public: http://SERVER_IP:5000
#     env_file:
#       - ./phone-store-api/.env
#     restart: always

#   frontend:
#     image: <caoleson04>/phone-store:latest       # üëà S·ª¨A t√™n user Docker Hub
#     container_name: phone-store-frontend
#     ports:
#       - "80:80"              # Web: http://SERVER_IP/
#     restart: always

# networks:
#   default:
#     name: phone-store-network
